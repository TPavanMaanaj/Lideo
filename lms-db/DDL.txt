-- lms_data.universities definition

CREATE TABLE `universities` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `address` varchar(255) DEFAULT NULL,
  `contact_email` varchar(255) DEFAULT NULL,
  `contact_phone` varchar(255) DEFAULT NULL,
  `created_at` datetime(6) DEFAULT NULL,
  `name` varchar(255) NOT NULL,
  `university_code` varchar(255) NOT NULL,
  `est_yr` bigint(20) DEFAULT NULL,
  `status` enum('ACTIVE','INACTIVE') NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UKjs3gada0mfiffxlkgdjhk1wc0` (`university_code`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;


-- lms_data.users definition

CREATE TABLE `users` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `created_at` datetime(6) DEFAULT NULL,
  `email` varchar(255) DEFAULT NULL,
  `full_name` varchar(255) DEFAULT NULL,
  `password` varchar(255) NOT NULL,
  `phone_number` varchar(255) DEFAULT NULL,
  `role` enum('STUDENT','SUPER_ADMIN','UNIVERSITY_ADMIN') NOT NULL,
  `updated_at` datetime(6) DEFAULT NULL,
  `username` varchar(255) NOT NULL,
  `university_id` bigint(20) DEFAULT NULL,
  `usercode` varchar(255) DEFAULT NULL,
  `dept` varchar(255) DEFAULT NULL,
  `year` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UKr43af9ap4edm43mmtq01oddj6` (`username`),
  UNIQUE KEY `UK6dotkott2kjsp8vw4d0m25fb7` (`email`),
  KEY `FKm6cuniuttvvmhstb2s32jsotf` (`university_id`),
  CONSTRAINT `FKm6cuniuttvvmhstb2s32jsotf` FOREIGN KEY (`university_id`) REFERENCES `universities` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;


-- lms_data.courses definition

CREATE TABLE `courses` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `category` varchar(255) DEFAULT NULL,
  `code` varchar(255) DEFAULT NULL,
  `created_at` datetime(6) DEFAULT NULL,
  `credits` int(11) NOT NULL,
  `description` varchar(255) DEFAULT NULL,
  `duration_weeks` int(11) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  `status` enum('ACTIVE','INACTIVE') DEFAULT NULL,
  `instructor_id` bigint(20) DEFAULT NULL,
  `university_id` bigint(20) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UK61og8rbqdd2y28rx2et5fdnxd` (`code`),
  KEY `FKcyfum8goa6q5u13uog0563gyp` (`instructor_id`),
  KEY `FKrcy3bbgamrs67gaumubcu2es7` (`university_id`),
  CONSTRAINT `FKcyfum8goa6q5u13uog0563gyp` FOREIGN KEY (`instructor_id`) REFERENCES `users` (`id`),
  CONSTRAINT `FKrcy3bbgamrs67gaumubcu2es7` FOREIGN KEY (`university_id`) REFERENCES `universities` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;


-- lms_data.enrollments definition

CREATE TABLE `enrollments` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `completed` bit(1) DEFAULT NULL,
  `enrolled_at` datetime(6) DEFAULT NULL,
  `course_id` bigint(20) NOT NULL,
  `student_id` bigint(20) NOT NULL,
  `university_id` bigint(20) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UKi0g6mfijtuh199nj653nva6j5` (`student_id`,`course_id`),
  KEY `FKho8mcicp4196ebpltdn9wl6co` (`course_id`),
  KEY `FKg2v691unfvg5mmfof2y4dyx3g` (`university_id`),
  CONSTRAINT `FK2lha5vwilci2yi3vu5akusx4a` FOREIGN KEY (`student_id`) REFERENCES `users` (`id`),
  CONSTRAINT `FKg2v691unfvg5mmfof2y4dyx3g` FOREIGN KEY (`university_id`) REFERENCES `universities` (`id`),
  CONSTRAINT `FKho8mcicp4196ebpltdn9wl6co` FOREIGN KEY (`course_id`) REFERENCES `courses` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;


-- lms_data.course_topics definition

CREATE TABLE `course_topics` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `topicdescription` varchar(255) DEFAULT NULL,
  `document_url` varchar(255) DEFAULT NULL,
  `duration_minutes` int(11) DEFAULT NULL,
  `sort_order` int(11) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `video_url` varchar(255) DEFAULT NULL,
  `course_id` bigint(20) NOT NULL,
  `university_id` bigint(20) NOT NULL,
  `url` varchar(255) DEFAULT NULL,
  `materials` enum('ASSIGNMENT','DOCUMENT','LINK','VIDEO') NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FKsjljcphahedm4opsyuddakf6v` (`course_id`),
  KEY `FKh7w5sblwtql3lr9m21kk196cc` (`university_id`),
  CONSTRAINT `FKh7w5sblwtql3lr9m21kk196cc` FOREIGN KEY (`university_id`) REFERENCES `universities` (`id`),
  CONSTRAINT `FKsjljcphahedm4opsyuddakf6v` FOREIGN KEY (`course_id`) REFERENCES `courses` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;